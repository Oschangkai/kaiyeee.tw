window.Utils={wwwDomain:function(){var t,e,n,i;return n=(e=location.hostname.split(".")).shift(),i=e.join("."),t="www"!==n?"www."+i:location.hostname,location.protocol+"//"+t+(location.port?":"+location.port:"")},getParameterByName:function(t,e){var n;return null==e&&(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&"),(n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e))?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},setUpTooltips:function(){return $('[data-toggle="tooltip"]').tooltip()},setUpReadMore:function(r){return null==r&&(r=!1),$(".truncated a.read-more").click(function(t){var e,n,i;return t.preventDefault(),e=(n=$(this).parent(".truncated")).find(".content"),n.attr("data-truncated",e.text()),r?(i=n.attr("data-read-more").autoLink({target:"_blank",rel:"nofollow noopener noreferrer"}),e.html(i)):e.text(n.attr("data-read-more")),$(this).hide(),n.find(".truncate").show()}),$(".truncated a.truncate").click(function(t){var e;return t.preventDefault(),(e=$(this).parent(".truncated")).find(".content").text(e.attr("data-truncated")),$(this).hide(),e.find(".read-more").show()})},setUpTruncatedHtmlWithReadMore:function(){return $(".truncated-html-with-read-more a.read-more").click(function(t){var e,n,i;return t.preventDefault(),i=(n=$(this).closest(".truncated-html-with-read-more")).find(".truncated-content-html"),e=n.find(".full-content-container"),i.hide(),e.show()}),$(".truncated-html-with-read-more a.truncate").click(function(t){var e,n,i;return t.preventDefault(),i=(n=$(this).closest(".truncated-html-with-read-more")).find(".truncated-content-html"),e=n.find(".full-content-container"),i.show(),e.hide()})},flashMessage:function(t,e){var n,i;return null==e&&(e={}),i={type:"info",delay:2400,html:!1},(e=_.extend(i,e)).type=function(){switch(e.type){case"error":return"danger";default:return e.type}}(),n=$('<div class="flash-message alert alert-'+e.type+'"></div>'),e.html?n.html(t):n.text(t),$("body").prepend(n),n.fadeIn().delay(e.delay).fadeOut()},errorFlashMessage:function(t,e){return null==t&&(t=null),null==e&&(e={}),t||(t=I18n.t("javascripts.application.some_errors_occurred")),this.flashMessage(t,_.extend(e,{type:"error"}))},copiedFlashMessage:function(){return this.flashMessage(I18n.t("javascripts.utils.copied"))},enableFormUntilTurbolinkChange:function(t){var e;return e=function(){return $.rails.enableFormElements($(t))},$(t).on("ajax:complete",function(t){return t.stopPropagation()}),$(document).on("page:before-change page:before-unload",e),$(t).on("ajax:error",e)},enableElementUntilTurbolinkChange:function(t){var e;return e=function(){return $.rails.enableElement($(t))},$(t).on("ajax:complete",function(t){return t.stopPropagation()}),$(document).on("page:before-change page:before-unload",e),$(t).on("ajax:error",e)},setUpAjaxStatusMsg:function(t,e,n,i){return null==e&&(e=null),null==n&&(n={}),null==i&&(i=null),Utils.setUpAjaxErrorHandler(t),e||(e=I18n.t("javascripts.application.saved")),n=_.extend({type:"success",delay:3e3},n),$(t).on("ajax:success",function(t){if("status"===n.type?GlobalStatus.showThenHideAfter(e,0):Utils.flashMessage(e,n),i)return setTimeout(function(){return i(t)},0)})},ajaxSavedHandler:function(){return GlobalStatus.showThenHideAfter(I18n.t("javascripts.application.saved"),0)},setUpAjaxErrorHandler:function(t){return $(t).on("ajax:error",Utils.ajaxErrorHandler)},ajaxErrorHandler:function(t,e){return 401===e.status?Utils.flashMessage(I18n.t("javascripts.utils.please_sign_up"),{type:"warning",delay:5e3,html:!0}):Utils.errorFlashMessage()},isMacOS:function(){return 0<=navigator.platform.toUpperCase().indexOf("MAC")},isChrome:function(){var t,e,n,i,r;return t=window.chrome,i=(r=window.navigator).vendor,n=-1<r.userAgent.indexOf("OPR"),e=-1<r.userAgent.indexOf("Edge"),!r.userAgent.match("CriOS")&&(null!=t&&"Google Inc."===i&&!1===n&&!1===e)},pushWithTurbolinksState:function(t){return history.pushState({turbolinks:!0,url:t},"",t)},reloadRetina:function(){var t,e,n,i,r;for(r=[],n=0,i=(e=document.getElementsByTagName("img")).length;n<i;n++)(t=e[n]).getAttributeNode("data-no-retina")?r.push(void 0):t.src?r.push(new RetinaImage(t)):r.push(void 0);return r},actAsSearchable:function(e){var n,t,i,r,o;return n=$(".search-form"),t=$(".search-input"),r=n.serialize(),o=function(){var t;if((t=n.serialize())!==r)return a(n,e),r=t},i=_.debounce(o,700),n.submit(function(t){return t.preventDefault()}),n.change(i),t.on("textInput input",i)},parameterize:function(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")},bindTabsToUrlAnchor:function(t){if($(t).find('[data-toggle="tab"]').click(function(t){return window.location.hash=$(t.currentTarget).attr("href").replace("#","")}),window.location.hash&&0<window.location.hash.length)return $(t).find('[href="'+window.location.hash+'"]').click()},setUpClickToCopy:function(){return $("[data-click-to-copy], [data-click-to-copy-html]").tooltip({title:I18n.t("javascripts.initialize.copy_to_clipboard")}),$("[data-click-to-copy]").click(function(t){var e;return e=$(t.currentTarget).attr("data-click-to-copy"),clipboard.copy(e),Utils.copiedFlashMessage(),$(t.currentTarget).blur()}),$("[data-click-to-copy-target]").click(function(t){var e,n;return e=$(t.currentTarget).attr("data-click-to-copy-target"),n=$(e).is("input")?$(e).val():$(e).text(),clipboard.copy(n),Utils.copiedFlashMessage(),$(t.currentTarget).blur()}),$("[data-click-to-copy-html]").click(function(t){var e,n;return n=$(t.currentTarget).attr("data-click-to-copy-html"),e=$("<div/>").html(n).text(),clipboard.copy({"text/html":e}),Utils.copiedFlashMessage(),$(t.currentTarget).blur()})},setUpSocialShareLinks:function(t,e,n){return null==n&&(n="Check out my @CakeResume!"),n=n+" "+e,(t=$(t)).find(".share-to-twitter").attr("href","https://twitter.com/intent/tweet?"+$.param({text:n})),t.find(".share-to-facebook").attr("href","https://www.facebook.com/sharer/sharer.php?"+$.param({u:e})),t.find(".share-to-linkedin").attr("href","https://www.linkedin.com/shareArticle?"+$.param({url:e})),t.find(".share-with-email").attr("href","mailto:?body="+e)},setUpLightbox:function(e){return null==e&&(e={}),$(document).off("click.lightbox",'[data-toggle="lightbox"]'),$(document).on("click.lightbox",'[data-toggle="lightbox"]',function(t){return t.preventDefault(),$(this).ekkoLightbox(e)})},mergeParamToUrl:function(o,t){return _.each(t,function(t,e){var n,i,r;if(e=encodeURIComponent(e),t=encodeURIComponent(t),""===(i=(o.split("?")[1]||"").split("&")))return o=o.split("?")[0]+"?"+e+"="+t;for(n=i.length,r=void 0;n--;)if((r=i[n].split("="))[0]===e){r[1]=t,i[n]=r.join("=");break}return n<0&&(i[i.length]=[e,t].join("=")),o=o.split("?")[0]+"?"+i.join("&")}),o},getAllUrlParams:function(t){var e,n,i,r,o,a,s,l;if(r={},l=t?t.split("?")[1]:window.location.search.slice(1))for(n=(l=l.split("#")[0]).split("&"),i=0;i<n.length;)e=n[i].split("="),a=void 0,o=e[0].replace(/\[\d*\]/,function(t){return a=t.slice(1,-1),""}),s="undefined"==typeof e[1]||e[1],o=o.toLowerCase(),s=s.toLowerCase(),r[o]?("string"==typeof r[o]&&(r[o]=[r[o]]),void 0===a?r[o].push(s):r[o][a]=s):r[o]=s,i++;return r},scrollToTop:function(t){return null==t&&(t="html, body"),$(t).animate({scrollTop:0})},scrollTo:function(t,e,n){return null==e&&(e=500),null==n&&(n=0),$("html, body").animate({scrollTop:$(t).offset().top-n},e)},navbarToggleBehavior:function(){if(992<=Math.max(document.documentElement.clientWidth,window.innerWidth||0))return $(".application-navbar-collapse [data-toggle=dropdown]").removeAttr("data-toggle")},navbarMainFixTopOnScroll:function(){var e;return e=!1,$(window).scroll(function(){var t;return 200<=(t=$(window).scrollTop())&&!e?($(".navbar-main").addClass("navbar-fixed-top").css({opacity:0}).animate({opacity:1},400),$("body").css({"margin-top":73}).addClass("body-navbar-fixed-top"),e=!0):t<200?($(".navbar-main").removeClass("navbar-fixed-top"),$("body").css({"margin-top":0}).removeClass("body-navbar-fixed-top"),e=!1):void 0})},isMobileBrowser:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isTwUser:function(){return"TW"===this.getCountryFromCookie()||"zh-TW"===this.getLocaleFromCookie()},getLocaleFromCookie:function(){return Cookies.get("locale")},getCountryFromCookie:function(){return Cookies.get("geoip2_country_code")},retryUntil:function(t,e,n,i){var r,o;return r=0,o=function(){return e()?t():r<i?(r+=1,window.setTimeout(o,n)):console.warn("Failed on re-try:",t)},window.setTimeout(o,n)}}
